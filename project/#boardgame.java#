import java.util.Random;


class boardgame {
    public static void main(String[] param){
	char[][][] buf = initBuffer();
	Integer[] board = initBoard();
	buf = stringToBuffer("Teeeeeeeeeet\nTest\nTest! ", buf, 0, 3, 3);
	printBuffer(buf, 0);
	System.exit(0);
    }
    public static Integer[] initBoard(){
	/**
	   Generate a new random board for this game.
	   Board represented by an array with each element containing an integer 
	   corresponding to the square type
	   ID | Square Type | Probability
	   ---+-------------+------------
	   0  | Normal      | 0.5
	   1  | Chance      | 0.1
	   2  | Add rule    | 0.2
	   3  | Remove rule | 0.1
	   4  | End turn    | 0.1
	   5  | GO          | SPECIAL
	 **/
	final Integer BOARDLENGTH = 30;
	Integer[] board = new Integer[BOARDLENGTH];
	Integer sqType;
	Random randgen = new Random();
	board[0] = 5; //GO square at the start
	for (int i=1; i < BOARDLENGTH; i++){
	    double rnd = randgen.nextDouble();
	    if (rnd <= 0.1){
		sqType = 1; //Chance
	    } else if (rnd <= 0.2){
		sqType = 3; //Remove Rule
	    } else if (rnd <= 0.3){
		sqType = 4; //End Turn
	    } else if (rnd <= 0.5){
		sqType = 2; //Add Rule
	    } else {
		sqType = 0; //Normal
	    }
	    board[i] = sqType;
	}
	return board;
    }
    public static void printBuffer(char[][][] buffer, Integer bufferId){
	String out = "";
	for (int r=0; r < buffer[bufferId].length; r++){
	    for(int c=0; c < buffer[bufferId][0].length; c++){
		out = out + buffer[bufferId][r][c];
	    }
	    out = out + "\n";
	}
	    System.out.println(out);
    }
    public static char[][][] stringToBuffer(String input,
					    char[][][] buffer,
					    Integer bufferId,
					    Integer startRow,
					    Integer startCol)
    {
	//TODO: don't assume that each line has the same number of columns!!!
	if (startCol + input.indexOf("\n") > buffer[bufferId][0].length){
	    return buffer;
	} else if (startRow + input.split("\n").length > buffer[bufferId].length){
	    return buffer;
	} else {
	    for (int r=0; r < input.split("\n").length; r++){
		//
		for (int c=0; c < input.indexOf("\n"); c++){
		    buffer[bufferId][r][c] = input.charAt(c + ((r * input.indexOf("\n")) + r));
		}
	    }
	    return buffer;
	    }
	    
    }
    public static char[][][] initBuffer(){
	/**
	   Initialises a blank buffer array for rendering the game.
	   Returns a 3 dimensional array containing two buffers, each with row and column data
	   Accessed like buffer[bufferId][row][column]
	 **/
	final Integer BUFCOUNT = 2;
	final Integer ROWCOUNT = 40;
	final Integer COLCOUNT = 80;
	char[][][] buffer = new char[BUFCOUNT][ROWCOUNT][COLCOUNT];
	for (int b=0; b < BUFCOUNT; b++){
	    for(int r=0; r < ROWCOUNT; r++){
		for(int c=0; c < COLCOUNT; c++){
		    buffer[b][r][c] = ' ';
		}
	    }
	}
	return buffer;
    }
     

}
